
// Fonte: Série Histórica do IPCA (IBGE) e Projeções (PDF Fornecido)
// Formato: 'AAAA-MM': Valor Percentual (ex: 0.56 para 0.56%)

export const IPCA_HISTORY: Record<string, number> = {
  // 2000 (A partir de Julho - Base NTN-B)
  '2000-07': 1.61, '2000-08': 1.31, '2000-09': 0.23, '2000-10': 0.14, '2000-11': 0.32, '2000-12': 0.59,

  // 2001
  '2001-01': 0.57, '2001-02': 0.46, '2001-03': 0.38, '2001-04': 0.58, '2001-05': 0.41, '2001-06': 0.52,
  '2001-07': 1.33, '2001-08': 0.70, '2001-09': 0.28, '2001-10': 0.83, '2001-11': 0.71, '2001-12': 0.65,

  // 2002
  '2002-01': 0.52, '2002-02': 0.36, '2002-03': 0.60, '2002-04': 0.80, '2002-05': 0.21, '2002-06': 0.42,
  '2002-07': 1.19, '2002-08': 0.65, '2002-09': 0.72, '2002-10': 1.31, '2002-11': 3.02, '2002-12': 2.10,

  // 2003
  '2003-01': 2.25, '2003-02': 1.57, '2003-03': 1.23, '2003-04': 0.97, '2003-05': 0.61, '2003-06': -0.15,
  '2003-07': 0.20, '2003-08': 0.34, '2003-09': 0.78, '2003-10': 0.29, '2003-11': 0.34, '2003-12': 0.52,

  // 2004
  '2004-01': 0.76, '2004-02': 0.61, '2004-03': 0.47, '2004-04': 0.37, '2004-05': 0.51, '2004-06': 0.71,
  '2004-07': 0.91, '2004-08': 0.69, '2004-09': 0.33, '2004-10': 0.44, '2004-11': 0.69, '2004-12': 0.86,

  // 2005
  '2005-01': 0.58, '2005-02': 0.59, '2005-03': 0.61, '2005-04': 0.87, '2005-05': 0.49, '2005-06': -0.02,
  '2005-07': 0.25, '2005-08': 0.17, '2005-09': 0.35, '2005-10': 0.75, '2005-11': 0.55, '2005-12': 0.36,

  // 2006
  '2006-01': 0.59, '2006-02': 0.41, '2006-03': 0.43, '2006-04': 0.21, '2006-05': 0.10, '2006-06': -0.21,
  '2006-07': 0.19, '2006-08': 0.05, '2006-09': 0.21, '2006-10': 0.33, '2006-11': 0.31, '2006-12': 0.48,

  // 2007
  '2007-01': 0.44, '2007-02': 0.44, '2007-03': 0.37, '2007-04': 0.25, '2007-05': 0.28, '2007-06': 0.28,
  '2007-07': 0.24, '2007-08': 0.47, '2007-09': 0.18, '2007-10': 0.30, '2007-11': 0.38, '2007-12': 0.74,

  // 2008
  '2008-01': 0.54, '2008-02': 0.49, '2008-03': 0.48, '2008-04': 0.55, '2008-05': 0.79, '2008-06': 0.74,
  '2008-07': 0.53, '2008-08': 0.28, '2008-09': 0.26, '2008-10': 0.45, '2008-11': 0.36, '2008-12': 0.28,

  // 2009
  '2009-01': 0.48, '2009-02': 0.55, '2009-03': 0.20, '2009-04': 0.48, '2009-05': 0.47, '2009-06': 0.36,
  '2009-07': 0.24, '2009-08': 0.15, '2009-09': 0.24, '2009-10': 0.28, '2009-11': 0.41, '2009-12': 0.37,

  // 2010
  '2010-01': 0.75, '2010-02': 0.78, '2010-03': 0.52, '2010-04': 0.57, '2010-05': 0.43, '2010-06': 0.00,
  '2010-07': 0.01, '2010-08': 0.04, '2010-09': 0.45, '2010-10': 0.75, '2010-11': 0.83, '2010-12': 0.63,

  // 2011
  '2011-01': 0.83, '2011-02': 0.80, '2011-03': 0.79, '2011-04': 0.77, '2011-05': 0.47, '2011-06': 0.15,
  '2011-07': 0.16, '2011-08': 0.37, '2011-09': 0.53, '2011-10': 0.43, '2011-11': 0.52, '2011-12': 0.50,

  // 2012
  '2012-01': 0.56, '2012-02': 0.45, '2012-03': 0.21, '2012-04': 0.64, '2012-05': 0.36, '2012-06': 0.08,
  '2012-07': 0.43, '2012-08': 0.41, '2012-09': 0.57, '2012-10': 0.59, '2012-11': 0.60, '2012-12': 0.79,

  // 2013
  '2013-01': 0.86, '2013-02': 0.60, '2013-03': 0.47, '2013-04': 0.55, '2013-05': 0.37, '2013-06': 0.26,
  '2013-07': 0.03, '2013-08': 0.24, '2013-09': 0.35, '2013-10': 0.57, '2013-11': 0.54, '2013-12': 0.92,

  // 2014
  '2014-01': 0.55, '2014-02': 0.69, '2014-03': 0.92, '2014-04': 0.67, '2014-05': 0.46, '2014-06': 0.40,
  '2014-07': 0.01, '2014-08': 0.25, '2014-09': 0.57, '2014-10': 0.42, '2014-11': 0.51, '2014-12': 0.78,

  // 2015
  '2015-01': 1.24, '2015-02': 1.22, '2015-03': 1.32, '2015-04': 0.71, '2015-05': 0.74, '2015-06': 0.79,
  '2015-07': 0.62, '2015-08': 0.22, '2015-09': 0.54, '2015-10': 0.82, '2015-11': 1.01, '2015-12': 0.96,

  // 2016
  '2016-01': 1.27, '2016-02': 0.90, '2016-03': 0.43, '2016-04': 0.61, '2016-05': 0.78, '2016-06': 0.35,
  '2016-07': 0.52, '2016-08': 0.44, '2016-09': 0.08, '2016-10': 0.26, '2016-11': 0.18, '2016-12': 0.30,

  // 2017
  '2017-01': 0.38, '2017-02': 0.33, '2017-03': 0.25, '2017-04': 0.14, '2017-05': 0.31, '2017-06': -0.23,
  '2017-07': 0.24, '2017-08': 0.19, '2017-09': 0.16, '2017-10': 0.42, '2017-11': 0.28, '2017-12': 0.44,

  // 2018
  '2018-01': 0.29, '2018-02': 0.32, '2018-03': 0.09, '2018-04': 0.22, '2018-05': 0.40, '2018-06': 1.26,
  '2018-07': 0.33, '2018-08': -0.09, '2018-09': 0.48, '2018-10': 0.45, '2018-11': -0.21, '2018-12': 0.15,

  // 2019
  '2019-01': 0.32, '2019-02': 0.43, '2019-03': 0.75, '2019-04': 0.57, '2019-05': 0.13, '2019-06': 0.01,
  '2019-07': 0.19, '2019-08': 0.11, '2019-09': -0.04, '2019-10': 0.10, '2019-11': 0.51, '2019-12': 1.15,

  // 2020
  '2020-01': 0.21, '2020-02': 0.25, '2020-03': 0.07, '2020-04': -0.31, '2020-05': -0.38, '2020-06': 0.26,
  '2020-07': 0.36, '2020-08': 0.24, '2020-09': 0.64, '2020-10': 0.86, '2020-11': 0.89, '2020-12': 1.35,

  // 2021
  '2021-01': 0.25, '2021-02': 0.86, '2021-03': 0.93, '2021-04': 0.31, '2021-05': 0.83, '2021-06': 0.53,
  '2021-07': 0.96, '2021-08': 0.87, '2021-09': 1.16, '2021-10': 1.25, '2021-11': 0.95, '2021-12': 0.73,

  // 2022
  '2022-01': 0.54, '2022-02': 1.01, '2022-03': 1.62, '2022-04': 1.06, '2022-05': 0.47, '2022-06': 0.67,
  '2022-07': -0.68, '2022-08': -0.36, '2022-09': -0.29, '2022-10': 0.59, '2022-11': 0.41, '2022-12': 0.62,

  // 2023
  '2023-01': 0.53, '2023-02': 0.84, '2023-03': 0.71, '2023-04': 0.61, '2023-05': 0.23, '2023-06': -0.08,
  '2023-07': 0.12, '2023-08': 0.23, '2023-09': 0.26, '2023-10': 0.24, '2023-11': 0.28, '2023-12': 0.56,

  // 2024
  '2024-01': 0.42, '2024-02': 0.83, '2024-03': 0.16, '2024-04': 0.38, '2024-05': 0.46, '2024-06': 0.21,
  '2024-07': 0.38, '2024-08': -0.02, '2024-09': 0.44, '2024-10': 0.56, '2024-11': 0.39, '2024-12': 0.52,

  // 2025 (Projeções conforme PDF)
  '2025-01': 0.16, '2025-02': 1.31, '2025-03': 0.56, '2025-04': 0.43, '2025-05': 0.26, '2025-06': 0.24,
  '2025-07': 0.26, '2025-08': -0.11, '2025-09': 0.48, '2025-10': 0.09
};

export function getIpcaForMonth(dateStr: string): number | null {
  if (!dateStr) return null;
  
  // Regra Oficial do Tesouro Direto:
  // Se Data de Compra < 15: O mês de referência para IPCA é o Mês Anterior.
  // Se Data de Compra >= 15: O mês de referência para IPCA é o Mês Corrente.
  
  const date = new Date(dateStr);
  const [y, m, d_val] = dateStr.split('-').map(Number);
  
  // Date logic
  const d = new Date(Date.UTC(y, m - 1, d_val));
  
  // Adjust month based on the day rule
  if (d.getUTCDate() < 15) {
      d.setUTCMonth(d.getUTCMonth() - 1);
  }
  // If day >= 15, we use the current month (no change needed to d)
  
  const year = d.getUTCFullYear();
  const month = d.getUTCMonth() + 1;
  
  const key = `${year}-${month.toString().padStart(2, '0')}`;
  
  if (IPCA_HISTORY[key] !== undefined) {
    return IPCA_HISTORY[key];
  }
  
  return null;
}
